window.codeElements.forEach(e=>{const t=document.createElement("div");t.className="copy-btn",t.textContent=ctx.copycode.default_text,e.appendChild(t),t.addEventListener("click",async()=>{const c=e.querySelector("pre")?.innerText||"";if(navigator.clipboard)try{await navigator.clipboard.writeText(c),t.textContent=ctx.copycode.success_text,t.classList.add("success"),hud.toast(ctx.copycode.toast,2500)}catch{t.textContent="\u672A\u83B7\u5F97\u7528\u6237\u8BB8\u53EF",t.classList.add("warning")}else t.textContent="\u6D4F\u89C8\u5668\u4E0D\u652F\u6301/\u975EHTTPS",t.classList.add("warning");setTimeout(()=>{t.textContent=ctx.copycode.default_text,t.classList.remove("success","warning")},3e3)})});
