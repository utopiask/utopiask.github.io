utils.jq(()=>{var n=$("input#search-input");if(n.length===0)return;var s=$("#search-result"),a=$("#search-wrapper"),l=algoliasearch(window.searchConfig.appId,window.searchConfig.apiKey),h=l.initIndex(window.searchConfig.indexName);function o(e,t){if(!t||t==="/")return e;var r=new RegExp(t);return e.filter(i=>r.test(i.url))}function c(e){var t=$("<ul>").addClass("search-result-list");e.length===0?a.addClass("noresult"):(a.removeClass("noresult"),e.forEach(function(r){var i=r._snippetResult.content.value,p=r.hierarchy.lvl1||"Untitled",d=$("<li>").html(`<a href="${r.url}"><span class='search-result-title'>${p}</span><p class="search-result-content">${i}</p></a>`);t.append(d)})),s.html(t)}n.on("input",function(){var e=$(this).val().trim(),t=n.data("filter");if(e.length<=0){a.attr("searching","false"),s.empty();return}a.attr("searching","true"),h.search(e,{hitsPerPage:window.searchConfig.hitsPerPage,attributesToHighlight:["content"],attributesToSnippet:["content:30"],highlightPreTag:'<span class="search-keyword">',highlightPostTag:"</span>",restrictSearchableAttributes:["content"]}).then(function(r){c(o(r.hits,t))})}),n.on("keydown",function(e){e.which==13&&e.preventDefault()});var u=new MutationObserver(function(e){e.length===1&&(e[0].addedNodes.length?a.removeClass("noresult"):e[0].removedNodes.length&&a.addClass("noresult"))});u.observe(s[0],{childList:!0})});
