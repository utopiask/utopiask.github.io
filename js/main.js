const util={diffDate:(o,t=!1)=>{const n=new Date,e=new Date(o),c=n.getTime()-e.getTime(),a=1e3*60,i=a*60,l=i*24;let s;if(t){const r=c/l,d=c/i,u=c/a;r>14?s=null:r>=1?s=parseInt(r)+" "+ctx.date_suffix.day:d>=1?s=parseInt(d)+" "+ctx.date_suffix.hour:u>=1?s=parseInt(u)+" "+ctx.date_suffix.min:s=ctx.date_suffix.just}else s=parseInt(c/l);return s},copy:(o,t)=>{const n=document.getElementById(o);n&&(n.select(),document.execCommand("Copy"),t&&t.length>0&&hud.toast(t,2500))},toggle:o=>{const t=document.getElementById(o);t&&t.classList.toggle("display")},scrollTop:()=>{window.scrollTo({top:0,behavior:"smooth"})},scrollComment:()=>{document.getElementById("comments").scrollIntoView({behavior:"smooth"})},viewportLazyload:(o,t,n=!0)=>{if(!n||!("IntersectionObserver"in window)){t();return}const e=new IntersectionObserver(c=>{c[0].intersectionRatio>0&&(t(),e.disconnect())});e.observe(o)}},hud={toast:(o,t)=>{const n=Number(isNaN(t)?2e3:t);var e=document.createElement("div");e.classList.add("toast"),e.classList.add("show"),e.innerHTML=o,document.body.appendChild(e),setTimeout(function(){document.body.removeChild(e)},n)}},l_body=document.querySelector(".l_body"),init={toc:()=>{utils.jq(()=>{var t=[];$("article.md-text :header").each(function(a,i){t.push(i)});function n(){var a=$(this).scrollTop(),i=null;for(var l in t){var s=$(t[l]);s.offset().top>a+32||(i?s.offset().top>=i.offset().top&&(i=s):i=s)}if(i){$("#data-toc a.toc-link").removeClass("active");var r="#"+i.attr("id");if(r!="#undefined"){const d=$('#data-toc a.toc-link[href="'+encodeURI(r)+'"]');d.length>0&&d.addClass("active")}else $("#data-toc a.toc-link:first").addClass("active")}}function e(){const a=document.querySelector("#data-toc .toc"),i=document.querySelector("#data-toc .toc a.toc-link.active");if(a==null||i==null)return;const l=i.getBoundingClientRect().bottom-a.getBoundingClientRect().bottom+100,s=i.getBoundingClientRect().top-a.getBoundingClientRect().top-64;s<0?a.scrollBy({top:s,behavior:"smooth"}):l>0&&a.scrollBy({top:l,behavior:"smooth"})}var c=null;window.addEventListener("scroll",function(){n(),c!==null&&clearTimeout(c),c=setTimeout(function(){e()}.bind(this),50)})})},sidebar:()=>{utils.jq(()=>{$("#data-toc a.toc-link").click(function(o){sidebar.dismiss()})})},relativeDate:o=>{o.forEach(t=>{const n=t,e=n.getAttribute("datetime");let c=util.diffDate(e,!0);c&&(n.innerText=c)})},registerTabsTag:function(){document.querySelectorAll(".tabs .nav-tabs .tab").forEach(o=>{o.addEventListener("click",t=>{if(t.preventDefault(),o.classList.contains("active"))return;[...o.parentNode.children].forEach(e=>{e.classList.toggle("active",e===o)});const n=document.getElementById(o.querySelector("a").getAttribute("href").replace("#",""));[...n.parentNode.children].forEach(e=>{e.classList.toggle("active",e===n)}),n.dispatchEvent(new Event("tabs:click",{bubbles:!0}))})}),window.dispatchEvent(new Event("tabs:register"))}};init.toc(),init.sidebar(),init.relativeDate(document.querySelectorAll("#post-meta time")),init.registerTabsTag();
